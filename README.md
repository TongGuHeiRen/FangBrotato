# 机甲肉鸽游戏 - 最小化演示程序

这是一个基于Godot 4.4开发的最小化机甲肉鸽游戏演示程序，实现了基本的游戏功能，包括玩家控制、敌人生成、波次系统和菜单系统。

## 项目结构

```
机甲肉鸽/
├── 场景/           # 存放所有场景文件
│   ├── MainScene.tscn      # 主场景
│   ├── player.tscn        # 玩家场景
│   ├── Enemy.tscn         # 敌人场景
│   └── MenuScene.tscn     # 菜单场景
├── 脚本/           # 存放所有脚本文件
│   ├── MainScene.gd       # 主场景脚本
│   ├── Player.gd          # 玩家脚本
│   ├── Enemy.gd           # 敌人脚本
│   └── MenuScene.gd       # 菜单脚本
├── 管理器/         # 存放游戏管理器脚本
│   └── GameManager.gd     # 游戏管理器脚本
└── 指引之地/       # 存放开发文档
    └── 主场景实战.md       # 开发指南
```

## 功能特点

1. **玩家控制**
   - 使用方向键（上下左右）移动玩家
   - 使用空格键（ui_accept）进行攻击
   - 玩家有生命值，可以受到伤害并死亡

2. **敌人系统**
   - 敌人自动生成并寻找玩家
   - 敌人可以攻击玩家
   - 敌人死亡时掉落金币

3. **波次系统**
   - 游戏分为多个波次
   - 每波敌人数量递增
   - 波次之间有时间间隔

4. **游戏状态管理**
   - 金币、生命值、波次等状态管理
   - 游戏开始、暂停、恢复、结束功能

5. **菜单系统**
   - 游戏内菜单，可暂停游戏
   - 提供继续、重新开始、退出选项
   - 支持ESC键快速打开/关闭菜单

## 操作说明

- **移动**：使用方向键（上下左右）
- **攻击**：空格键
- **菜单**：点击"菜单"按钮或按ESC键

## 技术特点

1. **Godot 4.4兼容性**
   - 使用`CharacterBody2D`替代已移除的`KinematicBody2D`
   - 使用`TileMapLayer`替代旧版`TileMap`
   - 符合Godot 4.x API规范

2. **代码组织**
   - 游戏逻辑拆分到独立的管理器脚本
   - 使用信号机制进行组件间通信
   - 避免主场景脚本过于臃肿

3. **计时器实现**
   - 使用`Timer`节点替代`_process()`中的手动计时
   - 通过信号机制驱动生成流程，提高稳定性

4. **UI层结构**
   - 菜单场景设置`process_mode = PROCESS_MODE_ALWAYS`确保暂停时仍可响应
   - 简化UI层级结构，提高性能

## 运行方法

1. 确保已安装Godot 4.4或更高版本
2. 打开Godot编辑器
3. 导入项目（选择项目根目录）
4. 打开`MainScene.tscn`场景
5. 点击运行按钮（F5）启动游戏

## 开发说明

这个演示程序是基于`指引之地/主场景实战.md`文档开发的，实现了文档中描述的基本功能。在开发过程中，对一些与新版标准不符的内容进行了修改，确保最终成果严格遵循Godot 4.x规范。

主要修改包括：
- 将玩家和敌人节点类型从`RigidBody2D`改为`CharacterBody2D`
- 使用`Timer`节点替代`_process()`中的手动计时
- 添加了游戏管理器脚本，拆分游戏逻辑
- 优化了菜单系统，确保在游戏暂停时仍可响应
- 使用信号机制进行组件间通信，提高代码可维护性

## 扩展建议

这个演示程序可以作为更复杂游戏的基础，可以考虑以下扩展方向：

1. 添加更多敌人类型和行为
2. 实现玩家升级和技能系统
3. 添加更多武器和装备
4. 实现更复杂的地图系统
5. 添加音效和背景音乐
6. 实现存档和读档功能
7. 添加更多游戏模式和难度级别